# موقعیت مکانی (Location)

<div dir="rtl">

### مقدمه

در اکوسیستم دیوار، **موقعیت مکانی** یا **Location** یکی از اجزای اساسی و مهم هر آگهی محسوب می‌شود. این مفهوم در پلتفرم کنار دیوار نیز با همان اهمیت و ساختار وجود دارد. این مستند به منظور آشنایی توسعه‌دهندگان با جزئیات و ویژگی‌های خاص موقعیت مکانی در پلتفرم کنار تهیه شده است.

### ساختار سلسله مراتبی موقعیت مکانی

در پلتفرم دیوار، موقعیت مکانی دارای ساختار **سلسله مراتبی (Hierarchical Structure)** است که شامل سه سطح اصلی می‌باشد:

```
استان (Province) > شهر (City) > منطقه (District)
```

**مثال:**

```
تهران > تهران > جنت آباد
اصفهان > اصفهان > خیابان چهارباغ
خراسان رضوی > مشهد > احمدآباد
```

### شناسه شهر (City Slug)

در پلتفرم کنار دیوار، شناسه اصلی که برای کار با موقعیت مکانی استفاده می‌شود، **شناسه شهر** یا **City Slug** است. این شناسه یک رشته متنی منحصر به فرد برای هر شهر می‌باشد.

**مشخصات فنی شناسه شهر:**

- **فرمت:** رشته متنی با حروف کوچک انگلیسی، اعداد و خط تیره (<span dir="ltr">`[a-z0-9-]`</span>)
- **مثال‌ها:** <span dir="ltr">`tehran`</span>، <span dir="ltr">`isfahan`</span>، <span dir="ltr">`mashhad`</span>، <span dir="ltr">`shiraz`</span>
- **پایداری:** شناسه شهرها معمولاً تغییر نمی‌کنند و پایدار هستند

### سطوح موقعیت مکانی

#### ۱. استان (Province)

- **کاربرد:** در پلتفرم کنار معمولاً مستقیماً با استان کار نمی‌کنیم
- **دلیل:** اکثر عملیات و جستجوها در سطح شهر انجام می‌شود

#### ۲. شهر (City)

- **اهمیت:** اصلی‌ترین سطح موقعیت مکانی در پلتفرم کنار
- **شناسه:** هر شهر دارای شناسه منحصر به فرد (City Slug) است
- **پایداری:** شهرها معمولاً تغییر نمی‌کنند و پایدار هستند
- **نقش:** اساس فیلترینگ و جستجوی آگهی‌ها

#### ۳. منطقه (District)

- **وجود:** همه شهرها منطقه ندارند
- **تغییرپذیری:** مناطق ممکن است در طول زمان تغییر کنند، اضافه یا حذف شوند
- **کاربرد:** برای فیلترینگ دقیق‌تر آگهی‌ها در شهرهای بزرگ

### اطلاعات موقعیت مکانی در پاسخ آگهی

در پاسخ آگهی، اطلاعات موقعیت مکانی به صورت زیر بازگردانده می‌شود:

```json
{
  "business_data": {
    "business_name": "string",
    "business_type": "CAR"
  },
  "category": "string",
  "chat_enabled": true,
  "city": "string",
  "data": {},
  "district": "string",
  "first_published_at": "2024-07-29T15:51:28.071Z",
  "is_phone_hidden": true,
  "state": "PUBLISHED",
  "supplier_chat_assistant_enabled": true,
  "token": "string"
}
```

### نکات مهم درباره فیلدهای موقعیت مکانی

- **city:** این فیلد شامل slug شهر است (مثل `tehran`، `isfahan`)
- **district:** این فیلد شامل slug منطقه است (در صورت وجود)

برای دریافت نام‌ه ای فارسی شهرها و مناطق، باید از مستندات زیر استفاده کنید:

- [**مستندات شهرها**](/openapi-doc/assets-get-cities)
- [**مستندات مناطق**](/openapi-doc/assets-get-districts)

### نکات مهم برای توسعه‌دهندگان

1. **مدیریت منطقه:** همیشه امکان خالی بودن فیلد district را در نظر بگیرید
2. **فیلترینگ:** استفاده از شناسه شهر برای فیلترینگ آگهی‌ها
3. **به‌روزرسانی:** مناطق ممکن است تغییر کنند، اما شهرها پایدار هستند
4. **تبدیل slug به نام:** برای نمایش نام فارسی شهر یا منطقه، حتماً از مستندات مربوطه استفاده کنید

</div>

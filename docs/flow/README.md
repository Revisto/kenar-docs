# سفر کاربر در افزونه‌های کنار: از دیوار به افزونه و بازگشت

پلتفرم «کنار» به شما اجازه می‌ده تا اپلیکیشن‌هایی بسازید که مستقیماً در تجربه کاربری دیوار ادغام می‌شن. درک «سفر کاربر» (User Journey) یعنی مسیری که کاربر از دیوار به افزونه شما و دوباره به دیوار طی می‌کنه، برای ساخت یک تجربه یکپارچه و موفق ضروریه.

:::note تعریف سفر کاربر
منظور از سفر کاربر، تمام مراحل و تعاملاتی است که کاربر از لحظه دیدن افزونه شما در دیوار تا ورود به آن، انجام کار و در نهایت بازگشت به دیوار طی می‌کند.
:::

این سفر به طور کلی شامل سه مرحله اصلی است:

1.  **نمایش و فعال‌سازی**: کاربر با افزونه شما در یک «نقطه تماس» (Touch Point) در دیوار مواجه می‌شود.
2.  **ورود به افزونه**: کاربر به اپلیکیشن شما منتقل می‌شود و داده‌های اولیه را دریافت می‌کند.
3.  **تکمیل فرآیند و بازگشت**: پس از اتمام کار یا انصراف، کاربر به دیوار بازگردانده می‌شود.

در ادامه هر یک از این مراحل را به تفصیل بررسی می‌کنیم.

---

## مرحله اول: فعال‌سازی افزونه در نقاط تماس (Touch Points)

برای اینکه کاربر بتواند افزونه شما را ببیند و از آن استفاده کند، ابتدا باید افزونه شما در «نقاط تماس» مشخصی از دیوار فعال باشد. نقطه تماس، به زبان ساده، همان جایی در اپلیکیشن یا سایت دیوار است که افزونه شما به کاربر پیشنهاد می‌شود (مثلاً دکمه‌ای در صفحه آگهی).

فرآیند فعال‌سازی نقاط تماس برای اپلیکیشن‌های تستی و منتشر شده متفاوت است.

### برای اپلیکیشن‌های در حال توسعه (تستی)

در پنل توسعه‌دهندگان کنار، به بخش «نقاط تماس» بروید. در این قسمت می‌توانید نقاط تماس دلخواه خود را برای تست و توسعه به صورت آنی فعال کنید.

:::warning محدودیت نقاط تماس تستی
در حال حاضر، فعال‌سازی آنی برای نقاط تماس موجود در «پنل حرفه‌ای» و «دیوار من» برای اپلیکیشن‌های تستی امکان‌پذیر نیست و این نقاط صرفاً برای اپلیکیشن‌های منتشر شده در دسترس هستند.
:::

### برای اپلیکیشن‌های منتشر شده (Production)

وقتی اپلیکیشن شما آماده انتشار است، باید درخواست فعال‌سازی نقاط تماس را برای بررسی ارسال کنید.

1.  به بخش «نقاط تماس» در پنل توسعه‌دهندگان مراجعه کرده و نقاط مورد نظر خود را انتخاب کنید.
2.  پس از ثبت تغییرات، یک تیکت پشتیبانی به صورت خودکار برای تیم کنار ارسال می‌شود.
3.  تیم ما درخواست شما را بررسی (Review) کرده و در صورت تأیید، افزونه شما در نقاط تماس انتخابی برای تمام کاربران دیوار فعال خواهد شد.

:::tip نکته مهم
پیشنهاد می‌کنیم قبل از ارسال درخواست برای انتشار، عملکرد افزونه خود را در تمام نقاط تماس تستی به طور کامل بررسی کنید تا فرآیند بررسی و تأیید سریع‌تر انجام شود.
:::

---

## مرحله دوم: انتقال کاربر و دریافت داده

پس از اینکه کاربر روی نقطه تماس مربوط به افزونه شما کلیک می‌کند، از محیط دیوار به URL اپلیکیشن شما منتقل (Redirect) می‌شود. در این انتقال، مجموعه‌ای از داده‌ها متناسب با آن نقطه تماس به اپلیکیشن شما ارسال می‌شود تا بتوانید زمینه (Context) لازم را برای ارائه سرویس داشته باشید.

ساختار و نوع داده‌های ارسالی در هر نقطه تماس می‌تواند متفاوت باشد. برای مثال، داده‌های ارسالی از یک نقطه تماس در صفحه «آگهی خودرو» با داده‌های نقطه تماس در صفحه «چت» فرق دارد.

برای مشاهده لیست کامل پارامترها و مقادیر ممکن در هر نقطه تماس، به مستندات زیر مراجعه کنید:

<div class="row">
  <div class="col col--8 col-offset-2">
    <div class="card">
      <div class="card__header">
        <h3>🎯 نقاط تماس (Touch Points)</h3>
      </div>
      <div class="card__body">
        <p>
          با انواع <b>نقاط شروع</b> و <b>داده‌های ورودی</b> که در هر نقطه به افزونه شما ارسال می‌شود، آشنا شوید.
        </p>
      </div>
      <div class="card__footer">
        <a href="./touchpoints" class="button button--primary button--block">مطالعه مستندات نقاط تماس</a>
      </div>
    </div>
  </div>
</div>

---

## مرحله سوم: تکمیل فرآیند و بازگشت کاربر به دیوار

مهم‌ترین بخش در حفظ یکپارچگی تجربه کاربری، بازگرداندن صحیح کاربر به دیوار پس از اتمام کار است. فرقی نمی‌کند که کاربر فرآیند را با موفقیت به پایان رسانده باشد یا از آن انصراف داده باشد؛ **در هر صورت افزونه شما موظف است کاربر را به دیوار بازگرداند.**

جزئیات کامل فنی درباره نحوه بازگشت و پارامترهای قابل استفاده در مستندات زیر شرح داده شده است:

<div class="row">
  <div class="col col--8 col-offset-2">
    <div class="card">
      <div class="card__header">
        <h3>↩️ تکمیل فرآیند (Completion)</h3>
      </div>
      <div class="card__body">
        <p>
          یاد بگیرید چگونه کاربر را پس از اتمام کار به دیوار بازگردانید.
        </p>
      </div>
      <div class="card__footer">
        <a href="./completion" class="button button--primary button--block">مطالعه مستندات بازگشت کاربر</a>
      </div>
    </div>
  </div>
</div>
